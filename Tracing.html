<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handwriting Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #result {
            font-size: 24px;
            margin-top: 20px;
        }
        canvas {
            border: 1px solid #000;
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>Handwriting Game</h1>
<button onclick="checkAccuracy()">Check Accuracy</button>
<p id="result"></p>
<canvas id="myCanvas" width="400" height="200" style="border:1px solid #000;"></canvas>

<script>
    var canvas = document.getElementById("myCanvas");
    var context = canvas.getContext("2d");
    var drawing = false;
    var tracedPixels = [];
    var originalPixels = [];
    var originalArea = calculateLetterArea("A");

    function simulateHandwritingAccuracy() {
        // Simulate handwriting accuracy (random value between 0 and 1)
        return Math.random();
    }

    function calculateLetterArea(letter) {
        context.font = "80px Arial"; // Adjusted font size to 80px
        context.clearRect(0, 0, canvas.width, canvas.height);
        context.fillText(letter, 100, 150); // Adjusted position for better centering
        var imageData = context.getImageData(0, 0, canvas.width, canvas.height);
        var pixels = [];

        for (var i = 0; i < imageData.data.length; i += 4) {
            // Check if the pixel is not transparent
            if (imageData.data[i + 3] !== 0) {
                pixels.push([i % (canvas.width * 4) / 4, Math.floor(i / (canvas.width * 4))]);
            }
        }

        return pixels;
    }

    function checkAccuracy() {
        var accuracy = calculateOverlap();
        document.getElementById("result").innerHTML = "Accuracy: " + (accuracy * 100).toFixed(2) + "%";
    }

    function startDrawing() {
        drawing = true;
        context.strokeStyle = "green"; // Set tracing color to green
        context.lineWidth = 5; // Set tracing line width
        context.lineCap = "round"; // Set line cap style to round
        context.beginPath();
    }

    function endDrawing() {
        drawing = false;
        context.closePath();
    }

    function draw(event) {
        if (!drawing) return;

        var x = event.clientX - canvas.offsetLeft;
        var y = event.clientY - canvas.offsetTop;

        context.lineTo(x, y);
        context.stroke();

        tracedPixels.push([x, y]);
    }

    function calculateOverlap() {
        var overlapCount = 0;

        for (var i = 0; i < tracedPixels.length; i++) {
            var pixel = tracedPixels[i];

            if (pixelInArray(pixel, originalPixels)) {
                overlapCount++;
            }
        }

        return overlapCount / originalArea.length;
    }

    function pixelInArray(pixel, array) {
        for (var i = 0; i < array.length; i++) {
            if (pixel[0] === array[i][0] && pixel[1] === array[i][1]) {
                return true;
            }
        }
        return false;
    }

    // Code for drawing the letter on the canvas with a bigger font size
    context.font = "150px Arial"; // Adjusted font size to 80px
    context.fillText("A", 100, 130); // Adjusted position for better centering
    originalPixels = calculateLetterArea("A"); // Recalculate original pixels

    // Event listeners for drawing
    canvas.addEventListener("mousedown", startDrawing);
    canvas.addEventListener("mouseup", endDrawing);
    canvas.addEventListener("mousemove", draw);
</script>

</body>
</html>
